{% extends "base.html" %}

{% block content %}
<div class="sessions-container">
  <div class="session-header">
    <h2>ðŸ“Š Study Sessions for {{ user["name"] }}</h2>

    <p>Total Sessions: <strong>{{ count }}</strong></p>
    {% if last_completed %}
      <p>Last Completed: {{ last_completed.strftime("%B %d, %Y %I:%M %p") }}</p>
    {% endif %}
  </div>

  <table>
    <tr>
      <th>Duration</th>
      <th>Date</th>
    </tr>
    {% for s in sessions %}
    <tr>
      <td>
        {% set hours = (s.duration // 60) %}
        {% set minutes = (s.duration % 60) %}
        {% if hours > 0 %}
          {{ hours }}:{{ "%02d"|format(minutes) }}
        {% else %}
          {{ minutes }} min
        {% endif %}
      </td>
      <td>{{ s.completed_at.strftime("%B %d, %Y %I:%M %p") }}</td>
    </tr>
    {% endfor %}
  </table>

  <!-- Back to Home Button -->
  <div style="margin-top: 20px;">
    <button onclick="window.location.href='{{ url_for('user.index') }}'">â¬… Back to Home</button>
  </div>
</div>

<script>
  // Fire confetti if there's at least one session
  {% if count > 0 %}
  playConfetti();
  playCelebrationSound();
  {% endif %}
</script>
{% endblock %}
